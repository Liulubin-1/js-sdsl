!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).sdsl={})}(this,function(e){"use strict";var o=undefined&&undefined.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var o,i=0,n=r.length;i<n;i++)!o&&i in r||((o=o||Array.prototype.slice.call(r,0,i))[i]=r[i]);return e.concat(o||Array.prototype.slice.call(r))};function r(e){var i=(e=void 0===e?[]:e).length,n=o([],e,!0);this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,n.length=0},this.front=function(){return this.empty()?undefined:n[0]},this.back=function(){return this.empty()?undefined:n[i-1]},this.forEach=function(e){n.forEach(e)},this.getElementByPos=function(e){if(e<0||i<=e)throw new Error("pos muse more than 0 and less than vector's size");return n[e]},this.eraseElementByPos=function(e){if(e<0||i<=e)throw new Error("pos muse more than 0 and less than vector's size");for(var r=e;r<i-1;++r)n[r]=n[r+1];this.pop_back()},this.eraseElementByValue=function(r){var t=[];this.forEach(function(e){e!==r&&t.push(e)}),t.forEach(function(e,r){n[r]=e});for(var e=t.length;e<i;)this.pop_back()},this.push_back=function(e){n.push(e),++i},this.pop_back=function(){n.pop(),0<i&&--i},this.setElementByPos=function(e,r){if(e<0||i<=e)throw new Error("pos muse more than 0 and less than vector's size");n[e]=r},this.insert=function(e,r,t){if(void 0===t&&(t=1),e<0||i<e)throw new Error("pos muse more than 0 and less than or equal to vector's size");n.splice.apply(n,o([e,0],new Array(t).fill(r),!1)),i+=t},this.reverse=function(){n.reverse()},this.unique=function(){var t,o=[];this.forEach(function(e,r){0!==r&&e===t||(o.push(e),t=e)}),o.forEach(function(e,r){n[r]=e});for(var e=o.length;e<i;)this.pop_back()},this.sort=function(e){n.sort(e)},Object.freeze(this)}Object.freeze(r);var i=undefined&&undefined.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var o,i=0,n=r.length;i<n;i++)!o&&i in r||((o=o||Array.prototype.slice.call(r,0,i))[i]=r[i]);return e.concat(o||Array.prototype.slice.call(r))};function t(e){var r=(e=void 0===e?[]:e).length,t=i([],e,!0);this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,t.length=0},this.push=function(e){t.push(e),++r},this.pop=function(){t.pop(),0<r&&--r},this.top=function(){return t[r-1]},Object.freeze(this)}Object.freeze(t);var u=function(e){this.val=null,this.pre=null,this.next=null,this.val=e};function n(e){var l=(e=void 0===e?[]:e).length,h=null,i=null;if(0<l){for(var r=h=new u(e[0]),t=1;t<l;++t)r.next=new u(e[t]),r=(r.next.pre=r).next;i=r}this.size=function(){return l},this.empty=function(){return 0===l},this.clear=function(){h=i=null,l=0},this.front=function(){return null==h?void 0:h.val},this.back=function(){return null==i?void 0:i.val},this.forEach=function(e){for(var r=h,t=0;null!==r;)e(r.val,t++),r=r.next},this.getElementByPos=function(e){if(e<0||l<=e)throw new Error("pos must more then 0 and less then the list length");for(var r=h;e--&&r;)r=r.next;return null==r?void 0:r.val},this.eraseElementByPos=function(e){if(e<0||l<=e)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.pop_front();else if(e===l-1)this.pop_back();else{for(var r=h;e--&&null!=r&&r.next;)r=r.next;if(!r||!r.pre||!r.next)throw new Error("unknown error");var t=r.pre,o=r.next;(o.pre=t).next=o,0<l&&--l}},this.eraseElementByValue=function(e){for(;h&&h.val===e;)this.pop_front();for(;i&&i.val===e;)this.pop_back();if(h)for(var r,t,o=h.next;o;)o.val===e&&(r=o.pre,(t=o.next)&&(t.pre=r),r&&(r.next=t),0<l&&--l),o=o.next},this.push_back=function(e){++l;e=new u(e);i?((i.next=e).pre=i,i=e):h=i=e},this.pop_back=function(){0<l&&--l,i&&(h===i?h=i=null:(i=i.pre)&&(i.next=null))},this.setElementByPos=function(e,r){if(e<0||l<=e)throw new Error("pos must more then 0 and less then the list length");for(var t=h;e--&&t;)t=t.next;t&&(t.val=r)},this.insert=function(e,r,t){if(void 0===t&&(t=1),e<0||l<e)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(t<0)throw new Error("insert size must more then 0");if(0===e)for(;t--;)this.push_front(r);else if(e===l)for(;t--;)this.push_back(r);else{for(var o=h,i=1;i<e&&(null!=o&&o.next);++i)o=null==o?void 0:o.next;if(!o)throw new Error("unknown error");var n=o.next;for(l+=t;t--;)o.next=new u(r),o=(o.next.pre=o).next;(o.next=n)&&(n.pre=o)}},this.reverse=function(){for(var e=h,r=i,t=0;e&&r&&2*t<l;){var o=e.val;e.val=r.val,r.val=o,e=e.next,r=r.pre,++t}},this.unique=function(){for(var e=h;e;){for(var r=e;r&&r.next&&r.val===r.next.val;)r=r.next,0<l&&--l;e.next=r.next,e=e.next}},this.sort=function(e){var r=[];this.forEach(function(e){r.push(e)}),r.sort(e);var t=h;r.forEach(function(e){t&&(t.val=e,t=t.next)})},this.push_front=function(e){++l;e=new u(e);h=h?(e.next=h).pre=e:i=e},this.pop_front=function(){0<l&&--l,h&&(h===i?h=i=null:(h=h.next)&&(h.pre=null))},this.merge=function(e){var t=this,o=h;e.forEach(function(e){for(;o&&o.val<=e;)o=o.next;var r;o?o===h?(t.push_front(e),o=h):(++l,(r=o.pre)&&(r.next=new u(e),((r.next.pre=r).next.next=o)&&(o.pre=r.next))):(t.push_back(e),o=i)})},Object.freeze(this)}function l(e){var r=new n(e=void 0===e?[]:e);this.size=function(){return r.size()},this.empty=function(){return r.empty()},this.clear=function(){r.clear()},this.push=function(e){r.push_back(e)},this.pop=function(){r.pop_front()},this.front=function(){return r.front()},Object.freeze(this)}function y(e){var f=[],s=0,c=0,a=0,d=0,p=0,C=(e=void 0===e?[]:e).length,r=C*y.sigma,p=Math.ceil(r/y.bucketSize);p=Math.max(p,3);for(var t=0;t<p;++t)f.push(new Array(y.bucketSize));var o=Math.ceil(C/y.bucketSize),a=s=Math.floor(p/2)-Math.floor(o/2);if(0<C)for(var i=0,t=0;t<o;++t){for(var n=0;n<y.bucketSize;++n)if(f[s+t][n]=e[i++],C<=i){a=s+t,d=n;break}if(C<=i)break}this.size=function(){return C},this.empty=function(){return 0===C},this.clear=function(){s=a=c=d=p=C=0,h.call(this,y.bucketSize),C=0},this.front=function(){return f[s][c]},this.back=function(){return f[a][d]},this.forEach=function(e){if(!this.empty()){var r=0;if(s!==a){for(o=c;o<y.bucketSize;++o)e(f[s][o],r++);for(o=s+1;o<a;++o)for(var t=0;t<y.bucketSize;++t)e(f[o][t],r++);for(o=0;o<=d;++o)e(f[a][o],r++)}else for(var o=c;o<=d;++o)e(f[s][o],r++)}};var l=function(e){var r=s*y.bucketSize+c,e=r+e;if(e<r||a*y.bucketSize+d<e)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(e/y.bucketSize),curNodePointerIndex:e%y.bucketSize}};this.getElementByPos=function(e){var r=l(e),e=r.curNodeBucketIndex,r=r.curNodePointerIndex;return f[e][r]},this.eraseElementByPos=function(e){var r=this;if(e<0||C<e)throw new Error("pos should more than 0 and less than queue's size");if(0===e)this.pop_front();else if(e===this.size())this.pop_back();else{for(var t=[],o=e+1;o<C;++o)t.push(this.getElementByPos(o));this.cut(e),this.pop_back(),t.forEach(function(e){return r.push_back(e)})}},this.eraseElementByValue=function(r){if(!this.empty()){var t=[];this.forEach(function(e){e!==r&&t.push(e)});for(var e=t.length,o=0;o<e;++o)this.setElementByPos(o,t[o]);this.cut(e-1)}};var h=function(e){for(var r=[],t=Math.max(Math.ceil(e*y.sigma/y.bucketSize),2),o=0;o<t;++o)r.push(new Array(y.bucketSize));var i=Math.ceil(e/y.bucketSize),n=Math.floor(t/2)-Math.floor(i/2),l=n,h=0;if(this.size())for(o=0;o<i;++o){for(var u=0;u<y.bucketSize;++u)if(r[n+o][u]=this.front(),this.pop_front(),this.empty()){l=n+o,h=u;break}if(this.empty())break}f=r,s=n,c=0,a=l,d=h,p=t,C=e};this.push_back=function(e){this.empty()||(a===p-1&&d===y.bucketSize-1&&h.call(this,this.size()),d<y.bucketSize-1?++d:a<p-1&&(++a,d=0)),++C,f[a][d]=e},this.pop_back=function(){this.empty()||(1!==this.size()&&(0<d?--d:s<a&&(--a,d=y.bucketSize-1)),0<C&&--C)},this.setElementByPos=function(e,r){var t=l(e),e=t.curNodeBucketIndex,t=t.curNodePointerIndex;f[e][t]=r},this.insert=function(e,r,t){var o=this;if(void 0===t&&(t=1),0===e)for(;t--;)this.push_front(r);else if(e===this.size())for(;t--;)this.push_back(r);else{for(var i=[],n=e;n<C;++n)i.push(this.getElementByPos(n));this.cut(e-1);for(n=0;n<t;++n)this.push_back(r);i.forEach(function(e){return o.push_back(e)})}},this.reverse=function(){for(var e=0,r=C-1;e<r;){var t=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(r)),this.setElementByPos(r,t),++e,--r}},this.unique=function(){if(!this.empty()){var t=[],o=this.front();this.forEach(function(e,r){0!==r&&e===o||(t.push(e),o=e)});for(var e=0;e<C;++e)this.setElementByPos(e,t[e]);this.cut(t.length-1)}},this.sort=function(e){var r=[];this.forEach(function(e){r.push(e)}),r.sort(e);for(var t=0;t<C;++t)this.setElementByPos(t,r[t])},this.push_front=function(e){this.empty()||(0===s&&0===c&&h.call(this,this.size()),0<c?--c:0<s&&(--s,c=y.bucketSize-1)),++C,f[s][c]=e},this.pop_front=function(){this.empty()||(1!==this.size()&&(c<y.bucketSize-1?++c:s<a&&(++s,c=0)),0<C&&--C)},this.shrinkToFit=function(){var r=[];this.forEach(function(e){r.push(e)});var e=r.length;f=[];for(var t=Math.ceil(e/y.bucketSize),o=0;o<t;++o)f.push(new Array(y.bucketSize));this.clear();for(var i=0,o=0;o<t;++o)for(var n=0;n<y.bucketSize;++n)if(f[o][n]=r[i++],e<=i){a=o,d=n;break}C=e},this.cut=function(e){var r,t;e<0?this.clear():(r=(t=l(e)).curNodeBucketIndex,t=t.curNodePointerIndex,a=r,d=t,C=e+1)},Object.freeze(this)}Object.freeze(n),Object.freeze(l),y.sigma=3,y.bucketSize=5e3,Object.freeze(y);var s=undefined&&undefined.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var o,i=0,n=r.length;i<n;i++)!o&&i in r||((o=o||Array.prototype.slice.call(r,0,i))[i]=r[i]);return e.concat(o||Array.prototype.slice.call(r))};function h(e,n){n=n||function(e,r){return r<e?-1:e<r?1:0};for(var l=(e=void 0===e?[]:e).length,h=s([],e,!0),o=function(e,r){if(e<0||l<=e)throw new Error("unknown error");if(r<0||l<=r)throw new Error("unknown error");var t=h[e];h[e]=h[r],h[r]=t},r=Math.floor((l-1)/2);0<=r;--r)for(var t=r,i=2*t+1;i<l;){var u=i+1,f=i;if(u<l&&0<n(h[i],h[u])&&(f=u),n(h[t],h[f])<=0)break;o(t,f),i=2*(t=f)+1}this.size=function(){return l},this.empty=function(){return 0===l},this.clear=function(){l=0,h.length=0},this.push=function(e){if(h.push(e),1!==++l)for(var r=l-1;0<r;){var t=Math.floor((r-1)/2);if(n(h[t],e)<=0)break;!function(e){if(e<0||l<=e)throw new Error("unknown error");var r=2*e+1,t=2*e+2;r<l&&0<n(h[e],h[r])&&o(e,r),t<l&&0<n(h[e],h[t])&&o(e,t)}(t),r=t}},this.pop=function(){if(!this.empty())if(1!==this.size()){var e=h[l-1];--l;for(var r=0;r<this.size();){var t=2*r+1,o=2*r+2;if(t>=this.size())break;var i=t;if(o<this.size()&&0<n(h[t],h[o])&&(i=o),0<=n(h[i],e))break;h[r]=h[i],r=i}h[r]=e}else--l},this.top=function(){return h[0]},Object.freeze(this)}Object.freeze(h);var p=(f.prototype.rotateLeft=function(){var e=this.parent,r=this.brother,t=this.leftChild,o=this.rightChild;if(!o)throw new Error("unknown error");var i=o.leftChild,n=o.rightChild;return e&&(e.leftChild===this?e.leftChild=o:e.rightChild===this&&(e.rightChild=o)),o.parent=e,o.brother=r,o.leftChild=this,o.rightChild=n,r&&(r.brother=o),this.parent=o,this.brother=n,this.leftChild=t,this.rightChild=i,n&&(n.parent=o,n.brother=this),t&&(t.parent=this,t.brother=i),i&&(i.parent=this,i.brother=t),o},f.prototype.rotateRight=function(){var e=this.parent,r=this.brother,t=this.leftChild;if(!t)throw new Error("unknown error");var o=this.rightChild,i=t.leftChild,n=t.rightChild;return e&&(e.leftChild===this?e.leftChild=t:e.rightChild===this&&(e.rightChild=t)),t.parent=e,t.brother=r,t.leftChild=i,t.rightChild=this,r&&(r.brother=t),i&&(i.parent=t,i.brother=this),this.parent=t,this.brother=i,this.leftChild=n,this.rightChild=o,n&&(n.parent=this,n.brother=o),o&&(o.parent=this,o.brother=n),t},f.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=null:this===this.parent.rightChild&&(this.parent.rightChild=null)),this.brother&&(this.brother.brother=null),this.key=null,this.value=null,this.parent=null,this.brother=null},f.TreeNodeColorType={red:!0,black:!1},f);function f(e,r){this.color=!0,this.key=null,this.value=null,this.parent=null,this.brother=null,this.leftChild=null,this.rightChild=null,e!==undefined&&r!==undefined&&(this.key=e,this.value=r)}Object.freeze(p),e.Deque=y,e.LinkList=n,e.Map=function(e,o){var t=this;void 0===e&&(e=[]),o=o||function(e,r){return e<r?-1:r<e?1:0};var i=0,n=new p;n.color=p.TreeNodeColorType.black,this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,(n=new p).color=p.TreeNodeColorType.black};var l=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},h=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.rightChild?h(e.rightChild):e};this.front=function(){if(this.empty())return undefined;var e=l(n);if(null===e.key||null===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}},this.back=function(){if(this.empty())return undefined;var e=h(n);if(null===e.key||null===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}};var u=function(e,r){return!(!e||null===e.key)&&(!!u(e.leftChild,r)||(!!r(e)||u(e.rightChild,r)))};this.forEach=function(r){var t=0;u(n,function(e){if(null===e.key||null===e.value)throw new Error("unknown error");return r({key:e.key,value:e.value},t++),!1})},this.getElementByPos=function(r){if(r<0||r>=this.size())throw new Error("pos must more than 0 and less than set's size");var t=0,o=null;if(u(n,function(e){if(r!==t)return++t,!1;if(null===e.key||null===e.value)throw new Error("unknown error");return o={key:e.key,value:e.value},!0}),null===o)throw new Error("unknown error");return o};var f=function(e){var r=e.parent;if(!r){if(e===n)return;throw new Error("unknown error")}if(e.color!==p.TreeNodeColorType.red){var t,o=e.brother;if(!o)throw new Error("unknown error");e===r.leftChild?o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateLeft(),n===r&&(n=t),f(e)):o.color===p.TreeNodeColorType.black&&(o.rightChild&&o.rightChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=r.rotateLeft(),n===r&&(n=t),e.color=p.TreeNodeColorType.black):o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||!o.leftChild||o.leftChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,f(r)):(o.color=p.TreeNodeColorType.red,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=o.rotateRight(),n===o&&(n=t),f(e))):e===r.rightChild&&(o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateRight(),n===r&&(n=t),f(e)):o.color===p.TreeNodeColorType.black&&(o.leftChild&&o.leftChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=r.rotateRight(),n===r&&(n=t),e.color=p.TreeNodeColorType.black):o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||!o.rightChild||o.rightChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,f(r)):(o.color=p.TreeNodeColorType.red,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=o.rotateLeft(),n===o&&(n=t),f(e))))}else e.color=p.TreeNodeColorType.black},s=function(e){for(var r,t,o=e;o.leftChild||o.rightChild;)o.rightChild&&(o=l(o.rightChild),r=e.key,e.key=o.key,o.key=r,t=e.value,e.value=o.value,o.value=t,e=o),o.leftChild&&(o=h(o.leftChild),r=e.key,e.key=o.key,o.key=r,t=e.value,e.value=o.value,o.value=t,e=o);f(o),o&&o.remove(),--i,n.color=p.TreeNodeColorType.black};this.eraseElementByPos=function(r){if(r<0||i<=r)throw new Error("pos must more than 0 and less than set's size");var t=0;u(n,function(e){return r===t?(s(e),!0):(++t,!1)})},this.eraseElementByKey=function(e){var r;this.empty()||null!==(r=d(n,e))&&null!==r.key&&0===o(r.key,e)&&s(r)};var c=function(e,r){if(!e||null===e.key)throw new Error("unknown error");var t=o(r,e.key);return t<0?e.leftChild?c(e.leftChild,r):(e.leftChild=new p,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<t?e.rightChild?c(e.rightChild,r):(e.rightChild=new p,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},a=function(e){var r=e.parent;if(!r){if(e===n)return;throw new Error("unknown error")}if(r.color!==p.TreeNodeColorType.black&&r.color===p.TreeNodeColorType.red){var t,o=r.brother,i=r.parent;if(!i)throw new Error("unknown error");o&&o.color===p.TreeNodeColorType.red?(o.color=r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,a(i)):o&&o.color!==p.TreeNodeColorType.black||(r===i.leftChild?e===r.leftChild?(r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,t=i.rotateRight(),i===n&&(n=t)):e===r.rightChild&&(t=r.rotateLeft(),i===n&&(n=t),a(r)):r===i.rightChild&&(e===r.leftChild?(t=r.rotateRight(),i===n&&(n=t),a(r)):e===r.rightChild&&(r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,t=i.rotateLeft(),i===n&&(n=t))))}};this.setElement=function(e,r){if(null===e||e===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!==r&&r!==undefined){if(this.empty())return++i,n.key=e,n.value=r,void(n.color=p.TreeNodeColorType.black);var t=c(n,e);t.key&&0===o(t.key,e)?t.value=r:(++i,t.key=e,t.value=r,a(t),n.color=p.TreeNodeColorType.black)}else this.eraseElementByKey(e)};var d=function(e,r){if(!e||null===e.key)return null;var t=o(r,e.key);return t<0?d(e.leftChild,r):0<t?d(e.rightChild,r):e};this.getElementByKey=function(e){e=d(n,e);if(null===e)return undefined;if(null===e.key||null===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}},this.union=function(e){var t=this;e.forEach(function(e){var r=e.key,e=e.value;return t.setElement(r,e)})},this.getHeight=function(){if(this.empty())return 0;var r=function(e){return e?Math.max(r(e.leftChild),r(e.rightChild))+1:1};return r(n)},e.forEach(function(e){var r=e.key,e=e.value;return t.setElement(r,e)}),Object.freeze(this)},e.PriorityQueue=h,e.Queue=l,e.Set=function(e,o){var r=this;void 0===e&&(e=[]),o=o||function(e,r){return e<r?-1:r<e?1:0};var i=0,n=new p;n.color=p.TreeNodeColorType.black,this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,(n=new p).color=p.TreeNodeColorType.black};var l=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},h=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.rightChild?h(e.rightChild):e};this.front=function(){if(this.empty())return undefined;var e=l(n);return null===e.key?undefined:e.key},this.back=function(){if(this.empty())return undefined;var e=h(n);return null===e.key?undefined:e.key};var u=function(e,r){return!(!e||null===e.key)&&(!!u(e.leftChild,r)||(!!r(e)||u(e.rightChild,r)))};this.forEach=function(r){var t=0;u(n,function(e){if(null===e.key)throw new Error("unknown error");return r(e.key,t++),!1})},this.getElementByPos=function(r){if(r<0||r>=this.size())throw new Error("pos must more than 0 and less than set's size");var t=0,o=null;if(u(n,function(e){return r===t?(o=e.key,!0):(++t,!1)}),null===o)throw new Error("unknown error");return o};var f=function(e){var r=e.parent;if(!r){if(e===n)return;throw new Error("unknown error")}if(e.color!==p.TreeNodeColorType.red){var t,o=e.brother;if(!o)throw new Error("unknown error");e===r.leftChild?o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateLeft(),n===r&&(n=t),f(e)):o.color===p.TreeNodeColorType.black&&(o.rightChild&&o.rightChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=r.rotateLeft(),n===r&&(n=t),e.color=p.TreeNodeColorType.black):o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||!o.leftChild||o.leftChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,f(r)):(o.color=p.TreeNodeColorType.red,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=o.rotateRight(),n===o&&(n=t),f(e))):e===r.rightChild&&(o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateRight(),n===r&&(n=t),f(e)):o.color===p.TreeNodeColorType.black&&(o.leftChild&&o.leftChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=r.rotateRight(),n===r&&(n=t),e.color=p.TreeNodeColorType.black):o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||!o.rightChild||o.rightChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,f(r)):(o.color=p.TreeNodeColorType.red,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=o.rotateLeft(),n===o&&(n=t),f(e))))}else e.color=p.TreeNodeColorType.black},s=function(e){for(var r,t=e;t.leftChild||t.rightChild;)t.rightChild&&(t=l(t.rightChild),r=e.key,e.key=t.key,t.key=r,e=t),t.leftChild&&(t=h(t.leftChild),r=e.key,e.key=t.key,t.key=r,e=t);f(t),t&&t.remove(),--i,n.color=p.TreeNodeColorType.black};this.eraseElementByPos=function(r){if(r<0||i<=r)throw new Error("pos must more than 0 and less than set's size");var t=0;u(n,function(e){return r===t?(s(e),!0):(++t,!1)})},this.eraseElementByValue=function(e){var r;this.empty()||null!==(r=d(n,e))&&null!==r.key&&0===o(r.key,e)&&s(r)};var c=function(e,r){if(!e||null===e.key)throw new Error("unknown error");var t=o(r,e.key);return t<0?e.leftChild?c(e.leftChild,r):(e.leftChild=new p,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<t?e.rightChild?c(e.rightChild,r):(e.rightChild=new p,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},a=function(e){var r=e.parent;if(!r){if(e===n)return;throw new Error("unknown error")}if(r.color!==p.TreeNodeColorType.black&&r.color===p.TreeNodeColorType.red){var t,o=r.brother,i=r.parent;if(!i)throw new Error("unknown error");o&&o.color===p.TreeNodeColorType.red?(o.color=r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,a(i)):o&&o.color!==p.TreeNodeColorType.black||(r===i.leftChild?e===r.leftChild?(r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,t=i.rotateRight(),i===n&&(n=t)):e===r.rightChild&&(t=r.rotateLeft(),i===n&&(n=t),a(r)):r===i.rightChild&&(e===r.leftChild?(t=r.rotateRight(),i===n&&(n=t),a(r)):e===r.rightChild&&(r.color=p.TreeNodeColorType.black,i.color=p.TreeNodeColorType.red,t=i.rotateLeft(),i===n&&(n=t))))}};this.insert=function(e){if(null===e||e===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++i,n.key=e,void(n.color=p.TreeNodeColorType.black);var r=c(n,e);r.key&&0===o(r.key,e)||(++i,r.key=e,a(r),n.color=p.TreeNodeColorType.black)};var d=function(e,r){if(!e||null===e.key)return null;var t=o(r,e.key);return t<0?d(e.leftChild,r):0<t?d(e.rightChild,r):e};this.find=function(e){var r=d(n,e);return null!==r&&null!==r.key&&0===o(r.key,e)},this.union=function(e){var r=this;e.forEach(function(e){return r.insert(e)})},this.getHeight=function(){if(this.empty())return 0;var r=function(e){return e?Math.max(r(e.leftChild),r(e.rightChild))+1:1};return r(n)},e.forEach(function(e){return r.insert(e)}),Object.freeze(this)},e.Stack=t,e.Vector=r,Object.defineProperty(e,"__esModule",{value:!0})});