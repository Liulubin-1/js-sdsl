!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).sdsl={})}(this,function(e){"use strict";var o=undefined&&undefined.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var o,n=0,i=r.length;n<i;n++)!o&&n in r||((o=o||Array.prototype.slice.call(r,0,n))[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};function r(e){var r=this;void 0===e&&(e=[]);var n=0,i=[];this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,i.length=0},this.front=function(){return this.empty()?undefined:i[0]},this.back=function(){return this.empty()?undefined:i[n-1]},this.forEach=function(e){i.forEach(e)},this.getElementByPos=function(e){if(e<0||n<=e)throw new Error("pos muse more than 0 and less than vector's size");return i[e]},this.eraseElementByPos=function(e){if(e<0||n<=e)throw new Error("pos muse more than 0 and less than vector's size");for(var r=e;r<n-1;++r)i[r]=i[r+1];this.pop_back()},this.eraseElementByValue=function(r){var t=[];this.forEach(function(e){e!==r&&t.push(e)}),t.forEach(function(e,r){i[r]=e});for(var e=t.length;e<n;)this.pop_back()},this.push_back=function(e){i.push(e),++n},this.pop_back=function(){i.pop(),0<n&&--n},this.setElementByPos=function(e,r){if(e<0||n<=e)throw new Error("pos muse more than 0 and less than vector's size");i[e]=r},this.insert=function(e,r,t){if(void 0===t&&(t=1),e<0||n<e)throw new Error("pos muse more than 0 and less than or equal to vector's size");i.splice.apply(i,o([e,0],new Array(t).fill(r),!1)),n+=t},this.find=function(e){return i.includes(e)},this.reverse=function(){i.reverse()},this.unique=function(){var t,o=[];this.forEach(function(e,r){0!==r&&e===t||(o.push(e),t=e)}),o.forEach(function(e,r){i[r]=e});for(var e=o.length;e<n;)this.pop_back()},this.sort=function(e){i.sort(e)},e.forEach(function(e){return r.push_back(e)}),Object.freeze(this)}function t(e){var r=this;void 0===e&&(e=[]);var t=0,o=[];this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){t=0,o.length=0},this.push=function(e){o.push(e),++t},this.pop=function(){o.pop(),0<t&&--t},this.top=function(){return o[t-1]},e.forEach(function(e){return r.push(e)}),Object.freeze(this)}Object.freeze(r),Object.freeze(t);var f=function(e){this.val=null,this.pre=null,this.next=null,this.val=e};function d(e){var r=this;void 0===e&&(e=[]);var l=0,h=null,n=null;this.size=function(){return l},this.empty=function(){return 0===l},this.clear=function(){h=n=null,l=0},this.front=function(){return null==h?void 0:h.val},this.back=function(){return null==n?void 0:n.val},this.forEach=function(e){for(var r=h,t=0;null!==r;)e(r.val,t++),r=r.next},this.getElementByPos=function(e){if(e<0||l<=e)throw new Error("pos must more then 0 and less then the list length");for(var r=h;e--&&r;)r=r.next;return null==r?void 0:r.val},this.eraseElementByPos=function(e){if(e<0||l<=e)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.pop_front();else if(e===l-1)this.pop_back();else{for(var r=h;e--&&null!=r&&r.next;)r=r.next;if(!r||!r.pre||!r.next)throw new Error("unknown error");var t=r.pre,o=r.next;(o.pre=t).next=o,0<l&&--l}},this.eraseElementByValue=function(e){for(;h&&h.val===e;)this.pop_front();for(;n&&n.val===e;)this.pop_back();if(h)for(var r,t,o=h.next;o;)o.val===e&&(r=o.pre,(t=o.next)&&(t.pre=r),r&&(r.next=t),0<l&&--l),o=o.next},this.push_back=function(e){++l;e=new f(e);n?((n.next=e).pre=n,n=e):h=n=e},this.pop_back=function(){0<l&&--l,n&&(h===n?h=n=null:(n=n.pre)&&(n.next=null))},this.setElementByPos=function(e,r){if(e<0||l<=e)throw new Error("pos must more then 0 and less then the list length");for(var t=h;e--&&t;)t=t.next;t&&(t.val=r)},this.insert=function(e,r,t){if(void 0===t&&(t=1),e<0||l<e)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(t<0)throw new Error("insert size must more then 0");if(0===e)for(;t--;)this.push_front(r);else if(e===l)for(;t--;)this.push_back(r);else{for(var o=h,n=1;n<e&&(null!=o&&o.next);++n)o=null==o?void 0:o.next;if(!o)throw new Error("unknown error");var i=o.next;for(l+=t;t--;)o.next=new f(r),o=(o.next.pre=o).next;(o.next=i)&&(i.pre=o)}},this.find=function(e){for(var r=h;r;){if(r.val===e)return!0;r=r.next}return!1},this.reverse=function(){for(var e=h,r=n,t=0;e&&r&&2*t<l;){var o=e.val;e.val=r.val,r.val=o,e=e.next,r=r.pre,++t}},this.unique=function(){for(var e=h;e;){for(var r=e;r&&r.next&&r.val===r.next.val;)r=r.next,0<l&&--l;e.next=r.next,e=e.next}},this.sort=function(e){var r=[];this.forEach(function(e){r.push(e)}),r.sort(e);var t=h;r.forEach(function(e){t&&(t.val=e,t=t.next)})},this.push_front=function(e){++l;e=new f(e);h=h?(e.next=h).pre=e:n=e},this.pop_front=function(){0<l&&--l,h&&(h===n?h=n=null:(h=h.next)&&(h.pre=null))},this.merge=function(e){var t=this,o=h;e.forEach(function(e){for(;o&&o.val<=e;)o=o.next;var r;o?o===h?(t.push_front(e),o=h):(++l,(r=o.pre)&&(r.next=new f(e),((r.next.pre=r).next.next=o)&&(o.pre=r.next))):(t.push_back(e),o=n)})},e.forEach(function(e){return r.push_back(e)}),Object.freeze(this)}function n(e){var r=new d(e=void 0===e?[]:e);this.size=function(){return r.size()},this.empty=function(){return r.empty()},this.clear=function(){r.clear()},this.push=function(e){r.push_back(e)},this.pop=function(){r.pop_front()},this.front=function(){return r.front()},Object.freeze(this)}function C(e){var u=[],s=0,a=0,c=0,d=0,p=0,y=(e=void 0===e?[]:e).length,r=y*C.sigma,p=Math.ceil(r/C.bucketSize);p=Math.max(p,3);for(var t=0;t<p;++t)u.push(new Array(C.bucketSize));var o=Math.ceil(y/C.bucketSize),c=s=Math.floor(p/2)-Math.floor(o/2);if(0<y)for(var n=0,t=0;t<o;++t){for(var i=0;i<C.bucketSize;++i)if(u[s+t][i]=e[n++],y<=n){c=s+t,d=i;break}if(y<=n)break}this.size=function(){return y},this.empty=function(){return 0===y},this.clear=function(){s=c=a=d=p=y=0,h.call(this,C.bucketSize),y=0},this.front=function(){return u[s][a]},this.back=function(){return u[c][d]},this.forEach=function(e){if(!this.empty()){var r=0;if(s!==c){for(o=a;o<C.bucketSize;++o)e(u[s][o],r++);for(o=s+1;o<c;++o)for(var t=0;t<C.bucketSize;++t)e(u[o][t],r++);for(o=0;o<=d;++o)e(u[c][o],r++)}else for(var o=a;o<=d;++o)e(u[s][o],r++)}};var l=function(e){var r=s*C.bucketSize+a,e=r+e;if(e<r||c*C.bucketSize+d<e)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(e/C.bucketSize),curNodePointerIndex:e%C.bucketSize}};this.getElementByPos=function(e){var r=l(e),e=r.curNodeBucketIndex,r=r.curNodePointerIndex;return u[e][r]},this.eraseElementByPos=function(e){var r=this;if(e<0||y<e)throw new Error("pos should more than 0 and less than queue's size");if(0===e)this.pop_front();else if(e===this.size())this.pop_back();else{for(var t=[],o=e+1;o<y;++o)t.push(this.getElementByPos(o));this.cut(e),this.pop_back(),t.forEach(function(e){return r.push_back(e)})}},this.eraseElementByValue=function(r){if(!this.empty()){var t=[];this.forEach(function(e){e!==r&&t.push(e)});for(var e=t.length,o=0;o<e;++o)this.setElementByPos(o,t[o]);this.cut(e-1)}};var h=function(e){for(var r=[],t=Math.max(Math.ceil(e*C.sigma/C.bucketSize),2),o=0;o<t;++o)r.push(new Array(C.bucketSize));var n=Math.ceil(e/C.bucketSize),i=Math.floor(t/2)-Math.floor(n/2),l=i,h=0;if(this.size())for(o=0;o<n;++o){for(var f=0;f<C.bucketSize;++f)if(r[i+o][f]=this.front(),this.pop_front(),this.empty()){l=i+o,h=f;break}if(this.empty())break}u=r,s=i,a=0,c=l,d=h,p=t,y=e};this.push_back=function(e){this.empty()||(c===p-1&&d===C.bucketSize-1&&h.call(this,this.size()),d<C.bucketSize-1?++d:c<p-1&&(++c,d=0)),++y,u[c][d]=e},this.pop_back=function(){this.empty()||(1!==this.size()&&(0<d?--d:s<c&&(--c,d=C.bucketSize-1)),0<y&&--y)},this.setElementByPos=function(e,r){var t=l(e),e=t.curNodeBucketIndex,t=t.curNodePointerIndex;u[e][t]=r},this.insert=function(e,r,t){var o=this;if(void 0===t&&(t=1),0===e)for(;t--;)this.push_front(r);else if(e===this.size())for(;t--;)this.push_back(r);else{for(var n=[],i=e;i<y;++i)n.push(this.getElementByPos(i));this.cut(e-1);for(i=0;i<t;++i)this.push_back(r);n.forEach(function(e){return o.push_back(e)})}},this.find=function(e){if(s===c){for(var r=a;r<=d;++r)if(u[s][r]===e)return!0;return!1}for(r=a;r<C.bucketSize;++r)if(u[s][r]===e)return!0;for(r=s+1;r<c;++r)for(var t=0;t<C.bucketSize;++t)if(u[r][t]===e)return!0;for(r=0;r<=d;++r)if(u[c][r]===e)return!0;return!1},this.reverse=function(){for(var e=0,r=y-1;e<r;){var t=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(r)),this.setElementByPos(r,t),++e,--r}},this.unique=function(){if(!this.empty()){var t=[],o=this.front();this.forEach(function(e,r){0!==r&&e===o||(t.push(e),o=e)});for(var e=0;e<y;++e)this.setElementByPos(e,t[e]);this.cut(t.length-1)}},this.sort=function(e){var r=[];this.forEach(function(e){r.push(e)}),r.sort(e);for(var t=0;t<y;++t)this.setElementByPos(t,r[t])},this.push_front=function(e){this.empty()||(0===s&&0===a&&h.call(this,this.size()),0<a?--a:0<s&&(--s,a=C.bucketSize-1)),++y,u[s][a]=e},this.pop_front=function(){this.empty()||(1!==this.size()&&(a<C.bucketSize-1?++a:s<c&&(++s,a=0)),0<y&&--y)},this.shrinkToFit=function(){var r=[];this.forEach(function(e){r.push(e)});var e=r.length;u=[];for(var t=Math.ceil(e/C.bucketSize),o=0;o<t;++o)u.push(new Array(C.bucketSize));this.clear();for(var n=0,o=0;o<t;++o)for(var i=0;i<C.bucketSize;++i)if(u[o][i]=r[n++],e<=n){c=o,d=i;break}y=e},this.cut=function(e){var r,t;e<0?this.clear():(r=(t=l(e)).curNodeBucketIndex,t=t.curNodePointerIndex,c=r,d=t,y=e+1)},Object.freeze(this)}function i(e,i){i=i||function(e,r){return r<e?-1:e<r?1:0};var l=[];(e=void 0===e?[]:e).forEach(function(e){return l.push(e)});for(var h=l.length,o=function(e,r){if(e<0||h<=e)throw new Error("unknown error");if(r<0||h<=r)throw new Error("unknown error");var t=l[e];l[e]=l[r],l[r]=t},r=Math.floor((h-1)/2);0<=r;--r)for(var t=r,n=2*t+1;n<h;){var f=n+1,u=n;if(f<h&&0<i(l[n],l[f])&&(u=f),i(l[t],l[u])<=0)break;o(t,u),n=2*(t=u)+1}this.size=function(){return h},this.empty=function(){return 0===h},this.clear=function(){h=0,l.length=0},this.push=function(e){if(l.push(e),1!==++h)for(var r=h-1;0<r;){var t=Math.floor((r-1)/2);if(i(l[t],e)<=0)break;!function(e){if(e<0||h<=e)throw new Error("unknown error");var r=2*e+1,t=2*e+2;r<h&&0<i(l[e],l[r])&&o(e,r),t<h&&0<i(l[e],l[t])&&o(e,t)}(t),r=t}},this.pop=function(){if(!this.empty())if(1!==this.size()){var e=l[h-1];--h;for(var r=0;r<this.size();){var t=2*r+1,o=2*r+2;if(t>=this.size())break;var n=t;if(o<this.size()&&0<i(l[t],l[o])&&(n=o),0<=i(l[n],e))break;l[r]=l[n],r=n}l[r]=e}else--h},this.top=function(){return l[0]},Object.freeze(this)}Object.freeze(d),Object.freeze(n),C.sigma=3,C.bucketSize=5e3,Object.freeze(C),Object.freeze(i);var p=(l.prototype.rotateLeft=function(){var e=this.parent,r=this.brother,t=this.leftChild,o=this.rightChild;if(!o)throw new Error("unknown error");var n=o.leftChild,i=o.rightChild;return e&&(e.leftChild===this?e.leftChild=o:e.rightChild===this&&(e.rightChild=o)),o.parent=e,o.brother=r,o.leftChild=this,o.rightChild=i,r&&(r.brother=o),this.parent=o,this.brother=i,this.leftChild=t,this.rightChild=n,i&&(i.parent=o,i.brother=this),t&&(t.parent=this,t.brother=n),n&&(n.parent=this,n.brother=t),o},l.prototype.rotateRight=function(){var e=this.parent,r=this.brother,t=this.leftChild;if(!t)throw new Error("unknown error");var o=this.rightChild,n=t.leftChild,i=t.rightChild;return e&&(e.leftChild===this?e.leftChild=t:e.rightChild===this&&(e.rightChild=t)),t.parent=e,t.brother=r,t.leftChild=n,t.rightChild=this,r&&(r.brother=t),n&&(n.parent=t,n.brother=this),this.parent=t,this.brother=n,this.leftChild=i,this.rightChild=o,i&&(i.parent=this,i.brother=o),o&&(o.parent=this,o.brother=i),t},l.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=null:this===this.parent.rightChild&&(this.parent.rightChild=null)),this.brother&&(this.brother.brother=null),this.key=null,this.value=null,this.parent=null,this.brother=null},l.TreeNodeColorType={red:!0,black:!1},l);function l(e,r){this.color=!0,this.key=null,this.value=null,this.parent=null,this.brother=null,this.leftChild=null,this.rightChild=null,e!==undefined&&r!==undefined&&(this.key=e,this.value=r)}function c(e,o){var r=this;void 0===e&&(e=[]),o=o||function(e,r){return e<r?-1:r<e?1:0};var n=0,i=new p;i.color=p.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,i.leftChild=i.rightChild=i.brother=i.parent=null,i.key=null,i.color=p.TreeNodeColorType.black};var l=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},h=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.rightChild?h(e.rightChild):e};this.front=function(){if(this.empty())return undefined;var e=l(i);return null===e.key?undefined:e.key},this.back=function(){if(this.empty())return undefined;var e=h(i);return null===e.key?undefined:e.key};var f=function(e,r){return!(!e||null===e.key)&&(!!f(e.leftChild,r)||(!!r(e)||f(e.rightChild,r)))};this.forEach=function(r){var t=0;f(i,function(e){if(null===e.key)throw new Error("unknown error");return r(e.key,t++),!1})},this.getElementByPos=function(r){if(r<0||r>=this.size())throw new Error("pos must more than 0 and less than set's size");var t=0,o=null;if(f(i,function(e){return r===t?(o=e.key,!0):(++t,!1)}),null===o)throw new Error("unknown error");return o};var u=function(e){var r=e.parent;if(!r){if(e===i)return;throw new Error("unknown error")}if(e.color!==p.TreeNodeColorType.red){var t,o=e.brother;if(!o)throw new Error("unknown error");e===r.leftChild?o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateLeft(),i===r&&(i=t),u(e)):o.color===p.TreeNodeColorType.black&&(o.rightChild&&o.rightChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=r.rotateLeft(),i===r&&(i=t),e.color=p.TreeNodeColorType.black):o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||!o.leftChild||o.leftChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,u(r)):(o.color=p.TreeNodeColorType.red,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=o.rotateRight(),i===o&&(i=t),u(e))):e===r.rightChild&&(o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateRight(),i===r&&(i=t),u(e)):o.color===p.TreeNodeColorType.black&&(o.leftChild&&o.leftChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=r.rotateRight(),i===r&&(i=t),e.color=p.TreeNodeColorType.black):o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||!o.rightChild||o.rightChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,u(r)):(o.color=p.TreeNodeColorType.red,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=o.rotateLeft(),i===o&&(i=t),u(e))))}else e.color=p.TreeNodeColorType.black},s=function(e){for(var r,t=e;t.leftChild||t.rightChild;)t.rightChild&&(t=l(t.rightChild),r=e.key,e.key=t.key,t.key=r,e=t),t.leftChild&&(t=h(t.leftChild),r=e.key,e.key=t.key,t.key=r,e=t);u(t),t&&t.remove(),--n,i.color=p.TreeNodeColorType.black};this.eraseElementByPos=function(r){if(r<0||n<=r)throw new Error("pos must more than 0 and less than set's size");var t=0;f(i,function(e){return r===t?(s(e),!0):(++t,!1)})},this.eraseElementByValue=function(e){var r;this.empty()||null!==(r=d(i,e))&&null!==r.key&&0===o(r.key,e)&&s(r)};var a=function(e,r){if(!e||null===e.key)throw new Error("unknown error");var t=o(r,e.key);return t<0?e.leftChild?a(e.leftChild,r):(e.leftChild=new p,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<t?e.rightChild?a(e.rightChild,r):(e.rightChild=new p,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},c=function(e){var r=e.parent;if(!r){if(e===i)return;throw new Error("unknown error")}if(r.color!==p.TreeNodeColorType.black&&r.color===p.TreeNodeColorType.red){var t,o=r.brother,n=r.parent;if(!n)throw new Error("unknown error");o&&o.color===p.TreeNodeColorType.red?(o.color=r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,c(n)):o&&o.color!==p.TreeNodeColorType.black||(r===n.leftChild?e===r.leftChild?(r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,t=n.rotateRight(),n===i&&(i=t)):e===r.rightChild&&(t=r.rotateLeft(),n===i&&(i=t),c(r)):r===n.rightChild&&(e===r.leftChild?(t=r.rotateRight(),n===i&&(i=t),c(r)):e===r.rightChild&&(r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,t=n.rotateLeft(),n===i&&(i=t))))}};this.insert=function(e){if(null===e||e===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++n,i.key=e,void(i.color=p.TreeNodeColorType.black);var r=a(i,e);r.key&&0===o(r.key,e)||(++n,r.key=e,c(r),i.color=p.TreeNodeColorType.black)};var d=function(e,r){if(!e||null===e.key)return null;var t=o(r,e.key);return t<0?d(e.leftChild,r):0<t?d(e.rightChild,r):e};this.find=function(e){var r=d(i,e);return null!==r&&null!==r.key&&0===o(r.key,e)},this.union=function(e){var r=this;e.forEach(function(e){return r.insert(e)})},this.getHeight=function(){if(this.empty())return 0;var r=function(e){return e?Math.max(r(e.leftChild),r(e.rightChild))+1:1};return r(i)},e.forEach(function(e){return r.insert(e)}),Object.freeze(this)}function y(e,o){var t=this;void 0===e&&(e=[]),o=o||function(e,r){return e<r?-1:r<e?1:0};var n=0,i=new p;i.color=p.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,(i=new p).color=p.TreeNodeColorType.black};var l=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},h=function(e){if(!e||null===e.key)throw new Error("unknown error");return e.rightChild?h(e.rightChild):e};this.front=function(){if(this.empty())return undefined;var e=l(i);if(null===e.key||null===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}},this.back=function(){if(this.empty())return undefined;var e=h(i);if(null===e.key||null===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}};var f=function(e,r){return!(!e||null===e.key)&&(!!f(e.leftChild,r)||(!!r(e)||f(e.rightChild,r)))};this.forEach=function(r){var t=0;f(i,function(e){if(null===e.key||null===e.value)throw new Error("unknown error");return r({key:e.key,value:e.value},t++),!1})},this.getElementByPos=function(r){if(r<0||r>=this.size())throw new Error("pos must more than 0 and less than set's size");var t=0,o=null;if(f(i,function(e){if(r!==t)return++t,!1;if(null===e.key||null===e.value)throw new Error("unknown error");return o={key:e.key,value:e.value},!0}),null===o)throw new Error("unknown error");return o};var u=function(e){var r=e.parent;if(!r){if(e===i)return;throw new Error("unknown error")}if(e.color!==p.TreeNodeColorType.red){var t,o=e.brother;if(!o)throw new Error("unknown error");e===r.leftChild?o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateLeft(),i===r&&(i=t),u(e)):o.color===p.TreeNodeColorType.black&&(o.rightChild&&o.rightChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=r.rotateLeft(),i===r&&(i=t),e.color=p.TreeNodeColorType.black):o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||!o.leftChild||o.leftChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,u(r)):(o.color=p.TreeNodeColorType.red,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=o.rotateRight(),i===o&&(i=t),u(e))):e===r.rightChild&&(o.color===p.TreeNodeColorType.red?(o.color=p.TreeNodeColorType.black,r.color=p.TreeNodeColorType.red,t=r.rotateRight(),i===r&&(i=t),u(e)):o.color===p.TreeNodeColorType.black&&(o.leftChild&&o.leftChild.color===p.TreeNodeColorType.red?(o.color=r.color,r.color=p.TreeNodeColorType.black,o.leftChild&&(o.leftChild.color=p.TreeNodeColorType.black),t=r.rotateRight(),i===r&&(i=t),e.color=p.TreeNodeColorType.black):o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||!o.rightChild||o.rightChild.color!==p.TreeNodeColorType.red?o.leftChild&&o.leftChild.color!==p.TreeNodeColorType.black||o.rightChild&&o.rightChild.color!==p.TreeNodeColorType.black||(o.color=p.TreeNodeColorType.red,u(r)):(o.color=p.TreeNodeColorType.red,o.rightChild&&(o.rightChild.color=p.TreeNodeColorType.black),t=o.rotateLeft(),i===o&&(i=t),u(e))))}else e.color=p.TreeNodeColorType.black},s=function(e){for(var r,t,o=e;o.leftChild||o.rightChild;)o.rightChild&&(o=l(o.rightChild),r=e.key,e.key=o.key,o.key=r,t=e.value,e.value=o.value,o.value=t,e=o),o.leftChild&&(o=h(o.leftChild),r=e.key,e.key=o.key,o.key=r,t=e.value,e.value=o.value,o.value=t,e=o);u(o),o&&o.remove(),--n,i.color=p.TreeNodeColorType.black};this.eraseElementByPos=function(r){if(r<0||n<=r)throw new Error("pos must more than 0 and less than set's size");var t=0;f(i,function(e){return r===t?(s(e),!0):(++t,!1)})},this.eraseElementByKey=function(e){var r;this.empty()||null!==(r=d(i,e))&&null!==r.key&&0===o(r.key,e)&&s(r)};var a=function(e,r){if(!e||null===e.key)throw new Error("unknown error");var t=o(r,e.key);return t<0?e.leftChild?a(e.leftChild,r):(e.leftChild=new p,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<t?e.rightChild?a(e.rightChild,r):(e.rightChild=new p,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},c=function(e){var r=e.parent;if(!r){if(e===i)return;throw new Error("unknown error")}if(r.color!==p.TreeNodeColorType.black&&r.color===p.TreeNodeColorType.red){var t,o=r.brother,n=r.parent;if(!n)throw new Error("unknown error");o&&o.color===p.TreeNodeColorType.red?(o.color=r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,c(n)):o&&o.color!==p.TreeNodeColorType.black||(r===n.leftChild?e===r.leftChild?(r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,t=n.rotateRight(),n===i&&(i=t)):e===r.rightChild&&(t=r.rotateLeft(),n===i&&(i=t),c(r)):r===n.rightChild&&(e===r.leftChild?(t=r.rotateRight(),n===i&&(i=t),c(r)):e===r.rightChild&&(r.color=p.TreeNodeColorType.black,n.color=p.TreeNodeColorType.red,t=n.rotateLeft(),n===i&&(i=t))))}};this.setElement=function(e,r){if(null===e||e===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!==r&&r!==undefined){if(this.empty())return++n,i.key=e,i.value=r,void(i.color=p.TreeNodeColorType.black);var t=a(i,e);t.key&&0===o(t.key,e)?t.value=r:(++n,t.key=e,t.value=r,c(t),i.color=p.TreeNodeColorType.black)}else this.eraseElementByKey(e)};var d=function(e,r){if(!e||null===e.key)return null;var t=o(r,e.key);return t<0?d(e.leftChild,r):0<t?d(e.rightChild,r):e};this.find=function(e){return!!d(i,e)},this.getElementByKey=function(e){e=d(i,e);if(null===e)return undefined;if(null===e.key||null===e.value)throw new Error("unknown error");return e.value},this.union=function(e){var t=this;e.forEach(function(e){var r=e.key,e=e.value;return t.setElement(r,e)})},this.getHeight=function(){if(this.empty())return 0;var r=function(e){return e?Math.max(r(e.leftChild),r(e.rightChild))+1:1};return r(i)},e.forEach(function(e){var r=e.key,e=e.value;return t.setElement(r,e)}),Object.freeze(this)}function v(e,r,u){var t=this;void 0===e&&(e=[]),u=u||function(e){var r=0,t="";if("number"==typeof e)r=((r=Math.floor(e))<<5)-r,r&=r;else for(var t="string"!=typeof e?JSON.stringify(e):e,o=0;o<t.length;o++){r=(r<<5)-r+t.charCodeAt(o);r&=r}return r^=r>>>16};var n=0,s=r=void 0===r?v.initSize:r,a=[];this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,s=r,a=[]},this.forEach=function(r){var t=0;a.forEach(function(e){e.forEach(function(e){r(e,t++)})})};this.insert=function(e){if(null===e||e===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var r=u(e)&s-1;if(a[r]){var t=a[r].size();if(a[r]instanceof d){if(a[r].find(e))return;a[r].push_back(e),a[r].size()>=v.treeifyThreshold&&(a[r]=new c(a[r]))}else a[r].insert(e);var o=a[r].size();n+=o-t}else a[r]=new d([e]),++n;s*v.sigma<n&&!function(h){var f;v.maxSize<=h||(s=2*h,f=[],a.forEach(function(e,r){if(!e.empty()){if(e instanceof d&&1===e.size()){var t=e.front();if(t===undefined)throw new Error("unknown error");f[u(t)&s-1]=new d([t])}else{var o,n,i,l;e instanceof c?(o=new d,n=new d,e.forEach(function(e){(0==(u(e)&h)?o:n).push_back(e)}),o.size()>v.untreeifyThreshold&&(o=new c(o)),n.size()>v.untreeifyThreshold&&(n=new c(n)),o.size()&&(f[r]=o),n.size()&&(f[r+h]=n)):(i=new d,l=new d,e.forEach(function(e){(0==(u(e)&h)?i:l).push_back(e)}),i.size()&&(f[r]=i),l.size()&&(f[r+h]=l))}a[r].clear()}}),a=f)}.call(this,s)},this.eraseElementByValue=function(e){var r,t=u(e)&s-1;a[t]&&(r=a[t].size(),a[t].eraseElementByValue(e),a[t]instanceof c&&a[t].size()<=v.untreeifyThreshold&&(a[t]=new d(a[t])),t=a[t].size(),n+=t-r)},this.find=function(e){var r=u(e)&s-1;return!!a[r]&&a[r].find(e)},e.forEach(function(e){return t.insert(e)}),Object.freeze(this)}function k(e,r,s){var t=this;void 0===e&&(e=[]),s=s||function(e){var r=0,t="";if("number"==typeof e)r=((r=Math.floor(e))<<5)-r,r&=r;else for(var t="string"!=typeof e?JSON.stringify(e):e,o=0;o<t.length;o++){r=(r<<5)-r+t.charCodeAt(o);r&=r}return r^=r>>>16};var l=0,a=r=void 0===r?k.initSize:r,c=[];this.size=function(){return l},this.empty=function(){return 0===l},this.clear=function(){l=0,a=r,c=[]},this.forEach=function(r){var t=0;c.forEach(function(e){e.forEach(function(e){r(e,t++)})})};this.setElement=function(t,o){if(null===t||t===undefined)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!==o&&o!==undefined){var n=s(t)&a-1;if(c[n]){var e=c[n].size();if(c[n]instanceof d){var i=!1;if(c[n].forEach(function(e,r){e.key===t&&(i=!0,c[n].setElementByPos(r,{key:t,value:o}))}),i)return;c[n].push_back({key:t,value:o}),c[n].size()>=k.treeifyThreshold&&(c[n]=new y(c[n]))}else c[n].setElement(t,o);var r=c[n].size();l+=r-e}else++l,c[n]=new d([{key:t,value:o}]);a*k.sigma<l&&!function(f){var u;k.maxSize<=f||(a=2*f,u=[],c.forEach(function(e,r){var t,o,n,i,l,h;e.empty()||(e instanceof d&&1===e.size()?(t=(o=e.front()).key,o=o.value,u[s(t)&a-1]=new d([{key:t,value:o}])):e instanceof y?(n=new d,i=new d,e.forEach(function(e){(0==(s(e.key)&f)?n:i).push_back(e)}),n.size()>k.untreeifyThreshold&&(n=new y(n)),i.size()>k.untreeifyThreshold&&(i=new y(i)),n.size()&&(u[r]=n),i.size()&&(u[r+f]=i)):(l=new d,h=new d,e.forEach(function(e){(0==(s(e.key)&f)?l:h).push_back(e)}),l.size()&&(u[r]=l),h.size()&&(u[r+f]=h)),c[r].clear())}),c=u)}.call(this,a)}else this.eraseElementByKey(t)},this.getElementByKey=function(r){var e=s(r)&a-1;if(!c[e])return undefined;if(c[e]instanceof y)return c[e].getElementByKey(r);var t=undefined;return c[e].forEach(function(e){r===e.key&&(t=e.value)}),t},this.eraseElementByKey=function(t){var e,o,r=s(t)&a-1;c[r]&&(e=c[r].size(),c[r]instanceof y?(c[r].eraseElementByKey(t),c[r].size()<=k.untreeifyThreshold&&(c[r]=new d(c[r]))):(o=-1,c[r].forEach(function(e,r){t===e.key&&(o=r)}),0<=o&&c[r].eraseElementByPos(o)),r=c[r].size(),l+=r-e)},this.find=function(r){var e=s(r)&a-1;if(!c[e])return!1;if(c[e]instanceof y)return c[e].find(r);var t=!1;return c[e].forEach(function(e){t=t||r===e.key}),t},e.forEach(function(e){var r=e.key,e=e.value;return t.setElement(r,e)}),Object.freeze(this)}Object.freeze(p),Object.freeze(c),Object.freeze(y),v.initSize=16,v.maxSize=1<<30,v.sigma=.75,v.treeifyThreshold=8,v.untreeifyThreshold=6,v.minTreeifySize=64,Object.freeze(v),k.initSize=16,k.maxSize=1<<30,k.sigma=.75,k.treeifyThreshold=8,k.untreeifyThreshold=6,k.minTreeifySize=64,Object.freeze(k),e.Deque=C,e.HashMap=k,e.HashSet=v,e.LinkList=d,e.Map=y,e.PriorityQueue=i,e.Queue=n,e.Set=c,e.Stack=t,e.Vector=r,Object.defineProperty(e,"__esModule",{value:!0})});